<% @contribution = (params["contribution"]=="true" and !document.contribution.nil?) %>

<section id="<%= document.class.to_s.underscore %> "class="layout_show">

  <%if @contribution%>
    <%= render :partial => 'contributions/breadcrumb_path', :locals  => { :path => document.contribution.parents_path } %>
  <%end%>

  <% document_profile_subject ||= document.owner_subject %>
  <%= render :partial => 'objects/show', :locals  => { :object => document } %>
  
  <% content_for :title do %>
    <%= document_profile_subject.name + ": " + t('repository.title') %>
  <% end %>

  <%= div_for document do %>
    
    <!--visor-->
    <div class="box-show">
      <div class="container-visor">
        <div class="caja-elementos">
          <%= render partial: "#{ document.class.to_s.tableize }/#{ document.class.to_s.underscore }_show",
        locals: { document.class.to_s.underscore.to_sym => document } %>
        </div>
      </div>
    </div>

    <!--recomended-->
    <!-- No option[:models] mean all resources -->
    <%= render :partial => 'recommender/sidebar', :locals  => { :resources => RecommenderSystem.resource_suggestions(current_subject,document,{:n=>16})} %>

    <div class="description-activity">
      <!-- Tool tab -->
      <div class="box_description">
        <div class="excursion_tool">
          <%= render :partial => 'common_documents/document-tool-tab', :locals => { :document => document } %>
        </div>     
      </div>
      
      <!--activity (comments, ...) -->
      <div class="activity-box">
        <%= render :partial => 'common_documents/activity', :locals => { :document => document } %>
      </div>
    </div>

    <%if @contribution%>
      <%= render :partial => 'contributions/contributable_activity', :locals => { :contribution => document.contribution } %>
    <%end%>

  <% end %>

</section>





