<%= div_for link, :class => 'row-fluid' do %>
  <ul class="thumbnails">
    <li class="span3">
      <% if link.callback_url %><a data-toggle="modal" href="#link-modal-<%= link.id.to_s%>" class="link-modal-button-<%= link.id.to_s%>"><% else %><a href="<%= link.url %>" target="_blank" class="container"><% end %><% if link.image %><%= image_tag(link.image, :size =>"75x75") %><% else %><i class='icon_repository75-75_link'></i> <% end %></a>
    </li>
    <li class="span9">
        <h4 class="title">
          <% if link.callback_url %><a data-toggle="modal" href="#link-modal-<%= link.id.to_s%>" class="link-modal-button-<%= link.id.to_s%>"><% else %><a href="<%= link.url %>" target="_blank"><% end %><%= link.title %></a>
        </h4>
      
      <div class="vdescription">
      <p><%= link.description %></p>
    </div>
      <p><%= link_to t('details.msg'), link, :class => "attachment_text_link" %></p>

    </li>
  </ul>

  <%= javascript_tag do %>
    <%= modal_for(link) %>
  <% end %>

<% end %>
  <%= javascript_tag do %>
    var p=$('.vdescription p');
    var divh=$('.vdescription').height();
    while ($(p).outerHeight()>divh) {
    $(p).text(function (index, text) {
        return text.replace(/\W*\s(\S)*$/, '...');
    });
}
  <% end %>

<div class="clearfloat"></div>
