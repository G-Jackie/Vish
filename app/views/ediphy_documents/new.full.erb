
<% content_for :ediphy_head do %>
  <%= csrf_meta_tag %>
<script type="text/javascript">

    function getMetaContentByName(name,content){
     var content = (content == null) ? 'content' : content;
     var dom_element = document.querySelector("meta[name='"+name+"']") || parent.document.querySelector("meta[name='"+name+"']");
     return parent.document.querySelector("meta[name='"+name+"']").getAttribute(content);
    }
    
    var ediphy_editor_params = {
      name: "<%= current_subject.name %>",
      id: "<%= Actor.normalize_id(current_subject) %>",
      authenticity_token: "<%= form_authenticity_token %>",
      export_url: "/ediphy_documents/",
      edit_prefix: "/edit"
    };

    function ediphy_exit_confirmation() {
      return 'Non saved changes will be erased';
    }

    window.onbeforeunload = ediphy_exit_confirmation;

  </script>
<% end %>

<%=render partial: 'ediphy_documents/ediphy_document_edit', :locals => {:ediphy_editor_json => 'undefined'}%>

