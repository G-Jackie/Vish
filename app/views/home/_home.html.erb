<%
  # homeModels = VishConfig.getHomeModels({:return_instances => true})
  homeModels = [Excursion]
  resourcesRecommended = RecommenderSystem.resource_suggestions(current_subject, nil, {:n => 15, :models => homeModels})
  resourcesRecent = ActivityObject.getRecent(15,{:subject => current_subject, :ids_to_avoid => resourcesRecommended.map{|r| r.activity_object.id}, :models => homeModels})
  resourcesPopular = RecommenderSystem.search({:n => 16, :order => "ranking DESC", :ids_to_avoid => (resourcesRecommended+resourcesRecent).map{|r| r.activity_object.id}, :page => 1, :models=> homeModels})
%>

 <section id="excursions_tab_ready3 " class="excursions recent_excursions">
  <ul class="first_excursions">
    <%= render partial: 'excursions/excursion-add' %>
    <%= render partial: 'home_row', :locals => { :resources => resourcesRecent, :prefix_id=>"home" } %>
  </ul>
  <div id="last_content_shown" style="display:none"><%=t('search.end')%></div>
</section>

<section id="excursions_tab_ready2 " class="excursions foryou_excursions">
  <ul class="items">
    <h3> <%= t("home.foryou")%> </h3>
  <%= render partial: 'home_row', :locals => { :resources => resourcesRecommended, :prefix_id=>"home"} %>
  </ul>
</section>
 
<section id="home_tab_ready" class="excursions">
  <ul class="">
    <h3> <%= t("home.populars")%> </h3>
    <%= render partial: 'home_popular', :locals => { :resources => resourcesPopular, :ids_to_avoid => (resourcesRecommended+resourcesRecent+resourcesPopular).map{|r| r.activity_object.id}, :prefix_id=>"home"} %>
  </ul>
</section>
