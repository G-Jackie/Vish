<section id="show_items" class="layout_show workshop_show">
  <div class="toolbar_nav-tab">
    <% if user_signed_in? and (can? :update, @workshop) %>
      <p><a href="<%=edit_workshop_path(@workshop)%>" class="btn btn-primary" id="edit_workshop">Turn on editing mode</a></p>
    <%end%>
  </div>


  <div class="wa_activity_wrapper wa_activity_wrapper_show header_workshop">
      <!--title-->
      <h3 class="title_WS main_title_WS"><%=@workshop.title%></h3>
      <!--avatar-->
      <div class="container-img_WS">
        <div class="dummy"></div>
        <div class="element resource-center">
          <img class="workshop_thumbnail applyBackstretch" src="<%=@workshop.thumbnail_url%>">
        </div>
      </div>
      <!--description-->
      <p class="description_WS"><%=@workshop.description%></p>
  </div>

  <!--owner-profile-->
  <div class="description-activity">
    <div class="box_description">
      <!--tool-->
      <div class="excursion_tool">
        <% shortURL = "http://" + request.env['HTTP_HOST'].sub(/^(m|www)\./, '') + workshop_path(@workshop) %>
        <%= render :partial => 'workshops/workshop-tool-tab', :locals => { :shortURL => shortURL} %>
      </div>
    </div>
  </div>

  <% @workshop_activities.each do |workshop_activity| %>

    <div class="wa_activity_wrapper wa_activity_wrapper_show">
      <% if workshop_activity.wa_type!="WaAssignment"  %>
        <div id="effect<%=workshop_activity.id%>" class="oculto">
          <button href="#" status="showMore" class="ui-state-default ui-corner-all showMore"><a><%=t('excursion.actions.show_more')%></a></button>
      <%end%>


      <% entity = workshop_activity.object %>
      <%className = entity.class.to_s%>
      <%classNameUnderscore = className.underscore%>
      <%= render partial: "#{ className.tableize }/#{ classNameUnderscore }",
           locals:  { classNameUnderscore.to_sym => entity, :prefix_id => "workshop" } %>

      <% if workshop_activity.wa_type!="WaAssignment"  %>
        </div>
      <%end%>
    </div>
  <%end%>

  <div class="description-activity workshop-comments">
    <!--activity (comments) -->
    <div class="activity-box">
      <%= render :partial => 'workshops/evaluate-activity'%>
    </div>
  </div>
</section>

<script>
  $(function() {
    $(".showMore").click(function(){
       var mainDiv = $(this).parent();
      if($(this).attr("status")=== "showMore"){
        mainDiv.switchClass( "oculto", "desplegado", 1000);
        $(this).html('<a><%=t("excursion.actions.show_fewer")%></a>');
        $(this).attr("status", "showFewer");
      }
      else{
        mainDiv.switchClass( "desplegado", "oculto", 1000);
        $(this).html('<a><%=t("excursion.actions.show_more")%></a>');
        $(this).attr("status", "showMore");

      }
      return false;
    });
  });
</script>



